# colony-demographic-noise
## Introduction
This repository contains code and data for the manuscript:

Yu, Q., Gralka, M., Duvernoy, MC. et al. Mutability of demographic noise in microbial range expansions. ISME J 15, 2643â€“2654 (2021). https://doi.org/10.1038/s41396-021-00951-9

bioRxiv: Yu, Q, M. Gralka, M.C. Duvernoy, M. Sousa, A. Harpak, O. Hallatschek, Mutability of demographic noise in microbial range expansions, bioRxiv, 2020. https://www.biorxiv.org/content/10.1101/2020.10.27.357483v1

Please contact qinqinyu[at]berkeley.edu if you have any questions. 

## Folder descriptions
### Code
* code_for_figures -- code to reproduce plots from the main text
* measure_msd -- code to measure the mean squared displacement (MSD) from bead trajectories.
  * run_msd_continuous.m -- calculates the MSD as a function of window length
  * run_get_msd_extrap.m -- fits the MSD as a function of window length and extracts the fitted value at a window length of 50 microns
* phenotypic_traits -- code for measuring colony-level phenotypic traits
  * analysis flow for measuring front roughness: run binarize_colony_images.py -> run_get_colony_mask.m -> run_get_growth_layer_depth.m 
* track_beads -- code for single particle tracking of beads from fluorescence timelapse images
  * main.m -- runs the code for automatically doing single particle tracking
  * main_manual.m -- runs the code using manually corrected single particle tracking parameters
  
### Data
* establishment_probability -- data to reproduce Figure 4b of the establishment probability vs. MSD for different genotypes
* example_bead_images -- timelapse microscopy images from a single example colony showing fluorescent beads near the front over ~12 hours and associated brightfield images
* excluded colonies -- lists of colony positions that were excluded from downstream analysis due to the appearance of beneficial sectors, slow growth, no cells transferred, inaccurate particle tracking, or out of focus images (see Methods section in paper)
* extrapolated_msd_50um -- the mean square displacement (MSD) at a window size of 50 microns, extracted from a power law fit of MSD across all window sizes
* front_roughness -- examples for colony front roughness as measured by whole colony images. Is populated by running code/phenotyipc_traits/run_get_growth_layer_depth.m
* growth_layer_depth -- the growth layer depth of colonies as measured using the bead track displacements
* main_experiments -- summary data from main experiments to reproduce Figure 2 of the distribution of demographic noise effects
  * includes genotypes with at least 2 replicates (independent colonies).
  * cell shape for Keio collection strains reported from Ursell et al, 2017 (lengthscale units unknown), for mreB and mrdA libraries from Shi et al, 2017 (lengthsale units: microns)
  * all MSD values are for window size L = 50 microns
  * the indexing of the 96 well plates is 1->position A1, 2->position A2, 13->position B1, etc.
  * values marked "relative" are relative to the mean WT value on each plate
* msd_images -- examples of the MSD of bead trajectories vs window length in each colony
* msd_mat -- .mat data files of the MSD and window length measured for each colony
* particle_positions -- .mat data files of the particle positions from single particle tracking
* relative_msd_50um -- the MSD normalized to the average of the wild type colony MSDs on each plate
* tracking_parameters -- the single particle tracking parameters used in code/track_beads/run_main.m
  * manually_changed=1 indicates that the parameters have been manually updated to improve upon tracking results from default parameters. Running run_main.m with the main_manual function only runs the single particle tracking code for the manually updated colonies.
* tracks_images -- examples of the bead trajectories
* tracks_mat -- .mat data files of the bead trajectories over time for each colony
* validation -- data to reproduce Figure 1e of the MSD vs fraction of diversity preserved
* whole_colony_images -- example whole colony images used for measuring colony front roughness 

### Figures
Includes main text figures that are generated by the code in this repository.
